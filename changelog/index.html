
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>Changelog - Formulaic</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#02a6f2">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="light-blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#050-28-aug-2022" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Formulaic" class="md-header__button md-logo" aria-label="Formulaic" data-md-component="logo">
      
  <img src="../assets/images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Formulaic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Changelog
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link md-tabs__link--active">
        Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../concepts/" class="md-tabs__link">
        Concepts
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../guides/" class="md-tabs__link">
        User Guides
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../reference/" class="md-tabs__link">
        Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Formulaic" class="md-nav__button md-logo" aria-label="Formulaic" data-md-component="logo">
      
  <img src="../assets/images/logo.svg" alt="logo">

    </a>
    Formulaic
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Changelog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Changelog
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#050-28-aug-2022" class="md-nav__link">
    0.5.0 (28 Aug 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#040-10-aug-2022" class="md-nav__link">
    0.4.0 (10 Aug 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#034-1-may-2022" class="md-nav__link">
    0.3.4 (1 May 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#033-4-april-2022" class="md-nav__link">
    0.3.3 (4 April 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#032-17-march-2022" class="md-nav__link">
    0.3.2 (17 March 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#031-15-march-2022" class="md-nav__link">
    0.3.1 (15 March 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#030-14-march-2022" class="md-nav__link">
    0.3.0 (14 March 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#024-9-july-2021" class="md-nav__link">
    0.2.4 (9 July 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#023-4-february-2021" class="md-nav__link">
    0.2.3 (4 February 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#022-4-february-2021" class="md-nav__link">
    0.2.2 (4 February 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#021-22-january-2021" class="md-nav__link">
    0.2.1 (22 January 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#020-21-january-2021" class="md-nav__link">
    0.2.0 (21 January 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#012-6-november-2019" class="md-nav__link">
    0.1.2 (6 November 2019)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#011-31-october-2019" class="md-nav__link">
    0.1.1 (31 October 2019)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#010-31-october-2019" class="md-nav__link">
    0.1.0 (31 October 2019)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#001-1-september-2019" class="md-nav__link">
    0.0.1 (1 September 2019)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/formulas/" class="md-nav__link">
        What are formulas?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/grammar/" class="md-nav__link">
        Formula Grammar
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          User Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides/advanced/" class="md-nav__link">
        Advanced Usage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#050-28-aug-2022" class="md-nav__link">
    0.5.0 (28 Aug 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#040-10-aug-2022" class="md-nav__link">
    0.4.0 (10 Aug 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#034-1-may-2022" class="md-nav__link">
    0.3.4 (1 May 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#033-4-april-2022" class="md-nav__link">
    0.3.3 (4 April 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#032-17-march-2022" class="md-nav__link">
    0.3.2 (17 March 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#031-15-march-2022" class="md-nav__link">
    0.3.1 (15 March 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#030-14-march-2022" class="md-nav__link">
    0.3.0 (14 March 2022)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#024-9-july-2021" class="md-nav__link">
    0.2.4 (9 July 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#023-4-february-2021" class="md-nav__link">
    0.2.3 (4 February 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#022-4-february-2021" class="md-nav__link">
    0.2.2 (4 February 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#021-22-january-2021" class="md-nav__link">
    0.2.1 (22 January 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#020-21-january-2021" class="md-nav__link">
    0.2.0 (21 January 2021)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#012-6-november-2019" class="md-nav__link">
    0.1.2 (6 November 2019)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#011-31-october-2019" class="md-nav__link">
    0.1.1 (31 October 2019)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#010-31-october-2019" class="md-nav__link">
    0.1.0 (31 October 2019)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#001-1-september-2019" class="md-nav__link">
    0.0.1 (1 September 2019)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>Changelog</h1>

<p>For changes since the latest tagged release, please refer to the
<a href="https://github.com/matthewwardrop/formulaic/commits/main">git commit log</a>.</p>
<hr />
<h2 id="050-28-aug-2022">0.5.0 (28 Aug 2022)</h2>
<p>This is a major new release with some minor API changes, some ergonomic
improvements, and a few bug fixes.</p>
<p><strong>Breaking changes:</strong></p>
<ul>
<li>Accessing named substructures of <code>Formula</code> objects (e.g. <code>formula.lhs</code>) no
  longer returns a list of terms; but rather a <code>Formula</code> object, so that the
  helper methods can remain accessible. You can access the raw terms by
  iterating over the formula (<code>list(formula)</code>) or looking up the root node
  (<code>formula.root</code>).</li>
</ul>
<p><strong>New features and improvements:</strong></p>
<ul>
<li>The <code>ModelSpec</code> object is now the source of truth in all <code>ModelMatrix</code>
  generations, and can be constructed directly from any supported specification
  using <code>ModelSpec.from_spec(...)</code>. Supported specifications include formula
  strings, parsed formulae, model matrices and prior model specs.</li>
<li>The <code>.get_model_matrix()</code> helper methods across <code>Formula</code>,
  <code>FormulaMaterializer</code>, <code>ModelSpec</code> and <code>model_matrix</code> objects/helpers
  functions are now consistent, and all use <code>ModelSpec</code> directly under the hood.</li>
<li>When accessing substructures of <code>Formula</code> objects (e.g. <code>formula.lhs</code>), the
  term lists will be wrapped as trivial <code>Formula</code> instances rather than returned
  as raw lists (so that the helper methods like <code>.get_model_matrix()</code> can still
  be used).</li>
<li><code>FormulaSpec</code> is now exported from the top-level module.</li>
</ul>
<p><strong>Bugfixes and cleanups:</strong></p>
<ul>
<li>Fixed <code>ModelSpec</code> specifications being overriden by default arguments to
  <code>FormulaMaterializer.get_model_matrix</code>.</li>
<li><code>Structured._flatten()</code> now correctly flattens unnamed substructures.</li>
</ul>
<hr />
<h2 id="040-10-aug-2022">0.4.0 (10 Aug 2022)</h2>
<p>This is a major new release with some new features, greatly improved ergonomics
for structured formulae, matrices and specs, and a few small breaking changes
(most with backward compatibility shims). All users are encouraged to upgrade.</p>
<p><strong>Breaking changes:</strong></p>
<ul>
<li><code>include_intercept</code> is no longer an argument to <code>FormulaParser.get_terms</code>;
  and is instead an argument of the <code>DefaultFormulaParser</code> constructor. If you
  want to modify the <code>include_intercept</code> behaviour, please use:
  <div class="highlight"><pre><span></span><code><span class="n">Formula</span><span class="p">(</span><span class="s2">&quot;y ~ x&quot;</span><span class="p">,</span> <span class="n">_parser</span><span class="o">=</span><span class="n">DefaultFormulaParser</span><span class="p">(</span><span class="n">include_intercept</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</code></pre></div></li>
<li>Accessing terms via <code>Formula.terms</code> is deprecated since <code>Formula</code> became a
  subclass of <code>Structured[List[Terms]]</code>. You can directly iterate over, and/or
  access nested structure on the <code>Formula</code> instance itself. <code>Formula.terms</code>
  has a deprecated property which will return a reference to itself in order to
  support legacy use-cases. This will be removed in 1.0.0.</li>
<li><code>ModelSpec.feature_names</code> and <code>ModelSpec.feature_columns</code> are deprecated in
  favour of <code>ModelSpec.column_names</code> and <code>ModelSpec.column_indices</code>. Deprecated
  properties remain in-place to support legacy use-cases. These will be removed
  in 1.0.0.</li>
</ul>
<p><strong>New features and enhancements:</strong></p>
<ul>
<li>Structured formulae (and their derived matrices and specs) are now mutable.
  Internally <code>Formula</code> has been refactored as a subclass of
  <code>Structured[List[Terms]]</code>, and can be incrementally built and modified. The
  matrix and spec outputs now have explicit subclasses of <code>Structured</code>
  (<code>ModelMatrices</code> and <code>ModelSpecs</code> respectively) to expose convenience methods
  that allow these objects to be largely used interchangeably with their
  singular counterparts.</li>
<li><code>ModelMatrices</code> and <code>ModelSpecs</code> arenow surfaced as top-level exports of the
  <code>formulaic</code> module.</li>
<li><code>Structured</code> (and its subclasses) gained improved integration of nested tuple
  structure, as well as support for flattened iteration, explicit mapping
  output types, and lots of cleanups.</li>
<li><code>ModelSpec</code> was made into a dataclass, and gained several new
  properties/methods to support better introspection and mutation of the model
  spec.</li>
<li><code>FormulaParser</code> was renamed <code>DefaultFormulaParser</code>, and made a subclass of the
  new formula parser interface <code>FormulaParser</code>. In this process
  <code>include_intercept</code> was removed from the API, and made an instance attribute
  of the default parser implementation.</li>
</ul>
<p><strong>Bugfixes and cleanups:</strong></p>
<ul>
<li>Fixed AST evaluation for large formulae that caused the evaluation to hit the
  recursion limit.</li>
<li>Fixed sparse categorical encoding when the dataframe index is not the standard
  range index.</li>
<li>Fixed a bug in the linear constraints parser when more than two constraints
  were specified in a comma-separated string.</li>
<li>Avoid implicit changing of the sparsity structure of CSC matrices.</li>
<li>If manually constructed <code>ModelSpec</code>s are provided by the user during
  materialization, they are updated to reflect the output-type chosen by the
  user, as well as whether to ensure full rank/etc.</li>
<li>Allowed use of older pandas versions. All versions &gt;=1.0.0 are now supported.</li>
<li>Various linting cleanups as <code>pylint</code> was added to the CI testing.</li>
</ul>
<p><strong>Documentation:</strong></p>
<ul>
<li>Apart from the <code>.materializer</code> submodule, most code now has inline
  documentation and annotations.</li>
</ul>
<hr />
<h2 id="034-1-may-2022">0.3.4 (1 May 2022)</h2>
<p>This is a backward compatible major release that adds several new features.</p>
<p><strong>New features and enhancements:</strong></p>
<ul>
<li>Added support for customizing the contrasts generated for categorical
  features, including treatment, sum, deviation, helmert and custom contrasts.</li>
<li>Added support for the generation of linear constraints for <code>ModelMatrix</code>
  instances (see <code>ModelMatrix.model_spec.get_linear_constraints</code>).</li>
<li>Added support for passing <code>ModelMatrix</code>, <code>ModelSpec</code> and other formula-like
  objects to the <code>model_matrix</code> sugar method so that pre-processed formulae can
  be used.</li>
<li>Improved the way tokens are manipulated for the right-hand-side intercept and
  substitutions of <code>0</code> with <code>-1</code> to avoid substitutions in quoted contexts.</li>
</ul>
<p><strong>Bugfixes and cleanups:</strong></p>
<ul>
<li>Fixed variable sanitization during evaluation, allowing variables with
  special characters to be used in Python transforms; for example:
  <code>bs(`my|feature%is^cool`)</code>.</li>
<li>Fixed the parsing of dictionaries and sets within python expressions in the
  formula; for example: <code>C(x, {"a": [1,2,3]})</code>.</li>
<li>Bumped requirement on <code>astor</code> to &gt;=0.8 to fix issues with ast-generation in
  Python 3.8+ when numerical constants are present in the parsed python
  expression (e.g. "bs(x, df=10)").</li>
</ul>
<h2 id="033-4-april-2022">0.3.3 (4 April 2022)</h2>
<p>This is a minor patch release that migrates the package tooling to
<a href="https://python-poetry.org/">poetry</a>; solving a version inconsistency when
packaging for <code>conda</code>.</p>
<h2 id="032-17-march-2022">0.3.2 (17 March 2022)</h2>
<p>This is a minor patch release that fixes an attempt to import <code>numpy.typing</code>
when numpy is not version 1.20 or later.</p>
<h2 id="031-15-march-2022">0.3.1 (15 March 2022)</h2>
<p>This is a minor patch release that fixes the maintaining of output types,
NA-handling, and assurance of full-rank for factors that evaluate to pre-encoded
columns when constructing a model matrix from a pre-defined ModelSpec. The
benchmarks were also updated.</p>
<h2 id="030-14-march-2022">0.3.0 (14 March 2022)</h2>
<p>This is a major new release with many new features, and a few small breaking
changes. All users are encouraged to upgrade.</p>
<p><strong>Breaking changes:</strong></p>
<ul>
<li>The minimum supported version of Python is now 3.7 (up from 3.6).</li>
<li>Moved transform implementations from <code>formulaic.materializers.transforms</code> to
    the top-level <code>formulaic.transforms</code> module, and ported all existing
    transforms to output <code>FactorValues</code> types rather than dictionaries.
    <code>FactorValues</code> is an object proxy that allows output types like
    <code>pandas.DataFrame</code>s to be used as they normally would, with some additional
    metadata for formulaic accessible via the <code>__formulaic_metadata__</code>
    attribute. This makes non-formula direct usage of these transforms much more
    pleasant.</li>
<li><code>~</code> is no longer a generic formula separator, and can only be used once in a
    formula. Please use the newly added <code>|</code> operator to separate a formula into
    multiple parts.</li>
</ul>
<p><strong>New features and enhancements:</strong></p>
<ul>
<li>Added support for "structured" formulas, and updated the <code>~</code> operator to use
    them. Structured formulas can have named substructures, for example: <code>lhs</code>
    and <code>rhs</code> for the <code>~</code> operator. The representation of formulas has been
    updated to show this structure.</li>
<li>Added support for context-sensitivity during the resolution of operators,
    allowing more flexible operators to be implemented (this is exploited by the
    <code>|</code> operator which splits formulas into multiple parts).</li>
<li>The <code>formulaic.model_matrix</code> syntactic sugar function now accepts <code>ModelSpec</code>
    and <code>ModelMatrix</code> instances as the "formula" spec, making generation of
    matrices with the same form as previously generated matrices more
    convenient.</li>
<li>Added the <code>poly</code> transform (compatible with R and patsy).</li>
<li><code>numpy</code> is now always available in formulas via <code>np</code>, allowing formulas like
    <code>np.sum(x)</code>. For convenience, <code>log</code>, <code>log10</code>, <code>log2</code>, <code>exp</code>, <code>exp10</code> and
    <code>exp2</code> are now exposed as transforms independent of user context.</li>
<li>Pickleability is now guaranteed and tested via unit tests. Failure to pickle
    any formulaic metadata object (such as formulas, model specs, etc) is
    considered a bug.</li>
<li>The capturing of user context for use in formula materialization has been
    split out into a utility method <code>formulaic.utils.context.capture_context()</code>.
    This can be used by libraries that wrap Formulaic to capture the variables
    and/or transforms available in a users' environment where appropriate.</li>
</ul>
<p><strong>Bugfixes and cleanups:</strong></p>
<ul>
<li>Migrated all code to use the Black style.</li>
<li>Increased unit testing coverage to 100%.</li>
<li>Fixed mis-alignment in the right- and left-hand sides of formulas if there
    were nulls at different indices.</li>
<li>Fixed basis spline transforms ignoring state, fixed generated splines for
    large numbers of knots, and fixed specification of knots via non-list
    datatypes.</li>
<li>Fixed category order being inconsistent if categories are explicitly ordered
    differently in the underlying data.</li>
<li>Lots of other minor nits and cleanups.</li>
</ul>
<p><strong>Documentation:</strong></p>
<ul>
<li>The structure of the docsite has been improved (but is still incomplete).</li>
<li>The <code>.parser</code> and <code>.utils</code> modules of Formulaic are now inline documented
    and annotated.</li>
</ul>
<hr />
<h2 id="024-9-july-2021">0.2.4 (9 July 2021)</h2>
<p>This is a minor release that fixes an issue whereby the ModelSpec instances
attached to ModelMatrix objects would keep reference to the original data,
greatly inflating the size of the ModelSpec.</p>
<h2 id="023-4-february-2021">0.2.3 (4 February 2021)</h2>
<p>This release is identical to v0.2.2, except that the source distribution now
includes the docs, license, and tox configuration.</p>
<h2 id="022-4-february-2021">0.2.2 (4 February 2021)</h2>
<p>This is a minor release with one bugfix.</p>
<ul>
<li>Fix pandas model matrix outputs when constants are generated as part of model
  matrix construction and the incoming dataframe has a custom rather than range
  index.</li>
</ul>
<h2 id="021-22-january-2021">0.2.1 (22 January 2021)</h2>
<p>This is a minor patch release that brings in some valuable improvements.</p>
<ul>
<li>Keep track of the pandas dataframe index if outputting a pandas <code>DataFrame</code>.</li>
<li>Fix using functions in formulae that are nested within a module or class.</li>
<li>Avoid crashing when an attempt is made to generate an empty model matrix.</li>
<li>Enriched setup.py with long description for a better experience on PyPI.</li>
</ul>
<h2 id="020-21-january-2021">0.2.0 (21 January 2021)</h2>
<p>This is major release that brings in a large number of improvements, with a huge
number of commits. Some API breakage from the experimental 0.1.x series is
likely in various edge-cases.</p>
<p>Highlights include:</p>
<ul>
<li>Enriched formula parser to support quoting, and evaluation of formulas involving fields with invalid Python names.</li>
<li>Added commonly used stateful transformations (identity, center, scale, bs)</li>
<li>Improved the helpfulness of error messages reported by the formula parser.</li>
<li>Added support for basic calculus on formulas (useful when taking the gradient of linear models).</li>
<li>Made it easier to extend Formulaic with additional materializers.</li>
<li>Many internal improvements to code quality and reliability, including 100% test coverage.</li>
<li>Added benchmarks for Formulaic against R and patsy.</li>
<li>Added documentation.</li>
<li>Miscellaneous other bugfixes and cleanups.</li>
</ul>
<hr />
<h2 id="012-6-november-2019">0.1.2 (6 November 2019)</h2>
<p>Performance improvements around the encoding of categorical features.</p>
<div class="highlight"><pre><span></span><code>Matthew Wardrop (1):
    Improve the performance of encoding operations.
</code></pre></div>
<h2 id="011-31-october-2019">0.1.1 (31 October 2019)</h2>
<p>No code changes here, just a verification that GitHub CI integration was working.</p>
<div class="highlight"><pre><span></span><code>Matthew Wardrop (1):
    Update Github workflow triggers.
</code></pre></div>
<h2 id="010-31-october-2019">0.1.0 (31 October 2019)</h2>
<p>This release added support for keeping track of encoding choices during
model matrix generation, so that they can be reused on similarly structured
data. It also added comprehensive unit testing and CI integration using
GitHub actions.</p>
<div class="highlight"><pre><span></span><code>Matthew Wardrop (5):
    Add support for stateful transforms (including encoding).
    Fix tokenizing of nested Python function calls.
    Add support for nested transforms that return multiple columns, as well as passing through of materializer config through to transforms.
    Add comprehensive unit testing along with several small miscellaneous bug fixes and improvements.
    Add GitHub actions configuration.
</code></pre></div>
<hr />
<h2 id="001-1-september-2019">0.0.1 (1 September 2019)</h2>
<p>Initial open sourcing of <code>formulaic</code>.</p>
<div class="highlight"><pre><span></span><code>Matthew Wardrop (1):
    Initial (mostly) working implementation of Wilkinson formulas.
</code></pre></div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="../concepts/" class="md-footer__link md-footer__link--next" aria-label="Next: Introduction" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Introduction
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>